---
title: Untity学习记录-2D平台跳跃游戏-03-导入并整理素材
published: 2025-03-16
tags: ['Unity','游戏']
description: 学习Unity
image: https://cdn.jsdelivr.net/gh/Flandre923/CDN@latest/img/20250316134318.png
category: Unity
draft: false
---
# 使用 Tilemap 绘制游戏场景！

## 创建 Tilemap 和设置 Sorting Layer

首先，我们接着上一个视频，继续创建几个 Tilemap。现在我们只有一个 Background，我们点击 Grid，按鼠标右键选择 2D -> Tilemap，然后给它起名字。我们需要一个叫做 Background Details，一会儿你就知道了。然后我们还要游戏的 Platform，就是场景的地板，还有就是我们的影子，稍后你就会知道了，我们先把它创建出来，叫 Shadows。

创建好了四个 Tilemap 之后，为它们添加叠层的排序，就是 Sorting Layer。现在默认的我们只有一个 Default，所以我们点击添加新的 Sorting Layer，然后点击 “+” 号，我们就可以添加了。我们要一次添加 Background、Platforms、Player、Foreground。

小伙伴们要留意，Sorting Layer 里的排序是越靠下的，那么越在镜头前面会显示，越在上面的就越在镜头后面显示，最下面的是最前面的叠层。

然后接下来我们要给它设置它的 Sorting Layer 所归属的层，所以我选择 Background，我把它设置成 Background 了。然后 Background Details，我希望它是 Background 同样的 Layer，但是它的层级是 1，那它就比 0 大，它会显示在 Background 的前面。那 Platforms 我们就选择 Platforms，Shadows 我选择 Platforms，然后给它的排序是 1，那就会显示在 Platforms 的前面。

## 绘制场景和使用 Tilemap 2D Extras

设置好了这些之后，我们接下来就要绘制了。那么上一个视频当中我们已经添加好了几个 Palette，这样的话，我们就可以在 Palette 里面进行选择来进行绘制了。

为了能够方便我们来绘制我们的场景，我们要知道我们的比例。那么我们要将我们的主人公 Robbie 添加进来，选择 Project 窗口里的 Robbie 的文件夹，然后选择这个 Robbie，就是一个普通的 2D 贴图，然后我们将它拖拽放到我们的场景当中。可以看到，我们的 Robbie 大概只有两个 Grid 这么高，也就是两个格这么高，所以我们大概能有个清晰的印象，我们的场景应该会画成什么样的。

接下来我们就要来绘画部分场景了，请留意在你绘制的时候不要忘记要调整你的当前的 Tilemap，就是你要在哪一个 map 上进行绘画，然后选择对应的 Palette。

那么这里，我们就要接下来介绍我们的 Tilemap 吧，对这个 2D Extra 的扩展包里面的强大的功能，为什么要介绍这个呢？

首先，我们来看一点，先来看一看，假如我绘制这个背景，我选择 Rectangle 方形的功能键，然后我区域的画上我们的背景，然后你会发现我们把我们的 Player 挡住了，这就是为什么当时我们设置了 Sorting Layer，我们要将我们的 Player 的叠层把它换成 Player，所以现在它就可以在我的屏幕上显示了。

那我有了我的 Background 之后，假如现在我直接在 Background 的图层上进行绘画，我要选择这个人脸，然后我要在这个图层上绘画，当我鼠标移过来的时候，你会发现这个人脸把周围的区域替换掉了，原因就是因为它在相同的 Tilemap 里边，虽然它是有透明的涂层的位置的，可是它会替代原来的这个 unit 里面的这个图案，所以这不是我们想要的效果。而且我们将它的 Sorting Layer 设置在 Background 之前，这样的话，我们在这个图层上进行绘画的图案的时候，你会看到了，我们就可以使用这个透明的效果来绘制它了。

好的，这是一个小的知识点，然后如果我想要绘制这个图案，我现在需要将它一个一个点进来进行绘制，我不能自动生成我想要的这个图案，所以画起来的话就比较麻烦，那这个功能要怎么来实现呢？

我们首先去到 Tilemap 的文件夹，找到 Tiles，然后找到对应的文件夹，那么现在我们要设置的是属于 Background，在这里面，我们选择 Background 文件夹在空白处，按鼠标右键选择创建，然后你会发现现在的菜单里比我们普通的空项目会多了一些选项，这就是插件的作用，我们选择最上面的 Tiles 的菜单，然后选择 Rule Tile 有规则的条件，规则的瓦片，我点击它，然后我们可以给它起个名字就叫做 BG Details，然后在右侧的 Inspector 的窗口里，我们来设置一下它的规则。

首先上面的是它默认所显示的图案是什么样的，所以我可以选择 select，然后选择一个它的默认的图案，比如说我选择这个 BG_Wall1，然后它就有了自己的默认的这个图片，接下来我要在右侧的菜单中为它添加一些规则了，我点击加号，这个时候可以看到这个菜单，里面有右侧的一个贴图，然后旁边是一个九宫格，就是设置它的规则了，我们现在要输出的是单个图片的输出，所以我要给它制定规则，我的鼠标划成方块之后它会自动识别它所处在的位置，然后自动生成这个图案，那怎么来做呢？听起来好像挺复杂，我大家一起做一下，你就明白什么意思了。

首先我要设置的就是这个中间的这个方块，中间的这个方块的这个颜色的贴图，所以我点击 select 选择这个第 8 号的贴图，这个第 8 号贴图，然后接下来我们给它设置规则，旁边的九宫格，我们来看左侧这个图就明白它的意思了，这个第 8 号贴图，什么时候我会将我的这个方块切换成这样的图案呢？当它四面八方都有 tile 的时候，它就应该是中间的这个样子，所以它四面八方，都有 Tile，的时候我就应使用它，那再次点击鼠标就是一个 X 就代表这个位置不能有 Tile。所以我们先选择这个，然后接下来我们来一个一个添加周围的这几个 Tile，我我先选择这个 0，也就是一个左上角的这个图案，那么左上角的图案，需要我们怎么调整呢？我们会留意它的右侧，有 Tile 下面有 Tile，但是左侧上面这些地方都没有 Tile 了，所以我们选择右侧可以下次可以，我们的另外两侧是不可以的。好的小伙伴们利用这样的方法，现在快速的将这个周围的四个角全添加好。

好的，添加好了四个角落之后，我们接下来要留意在我们的这个 Tile 里面，上一个视频，我说到了左右两个瓦片和上下的两个瓦片是共用的，所以左右的这个瓦片如何来使用自动的这个效果呢？我们留意左右的这个两个瓦片，只要它能够上下有这个 Tile，它就可以持续不断的延伸上下的，这个就是左右，有 Tile 的时候可以不断的延伸，所以我们来设置一下上下和左右的，只是选择一个图案就可以了，Wall1，然后它是左右，七，它是上下好了，现在我们设置好了这个自动的 Tile，然后怎么来用呢？我将它拖拽到我的这个 Palette 里面来，放到一个位置，现在我选择它，然后我选择画笔在我的图案中进行绘制的时候请留意，我单独点击的时候，它没有一些特殊的效果，当我把鼠标移过来的时候请留意，我一旦拐角的时候，你就会发现它的样子，有了变化，看到了吗？所以只要我现在直接按住鼠标画一个方块，它就会自动帮我填充，这样的图案是不是非常的方便呢？无论我是什么样的形状的闭合，它都会自动识别这里面的图案，但是小伙伴们请留意，比如说在我绘制这个图案的时候，我有两个内角，这两个内角在转弯的时候，我希望它应该是对应的反向的内脚，也就是说，这个位置的图案应当是在我的 Palette 里的的这个部分，所以它做一个内角来形成，所以它现在没有识别这个内脚，所以我继续在我的 Rule Tile 里面添加另外两个条件，我们选择这四个角，我们为它添加额外的条件，所以这次是如果它的内角没有形状的时候，比如说我先做这个脚让大家能看的清楚一点啊，我选择向左上的这个位置的图案。上左都是有瓦片图案的，可是左上角没有也就是这样的效果，这个时候我就将这个图案设置成这样就可以实现这样的效果了，然后我继续添加另外的两个角，好了，设置好了保存，但是小伙伴们有没有发现这里面的图案并没有任何的变化，这是为什么呢？所以小伙伴们请留意一个要点，在我们的这个 Rule TIle 里边，这些所有的规则是有它们的执行顺序的，也就是说，它们会优先考虑最上面一层的，这个规则，所以我们要将这四个角挪上来，比如说我们来看看这个角。我将它挪到上下和左右延伸的这个图案在上面，请留意窗口里的变化，看到了吗？这里已经变化了，我再来，看到这个位置的变化，看到了吧？所以我们将这四个角落的额外添加条件都挪到上面来，老大这样就彻底完成了我们的这个 Rule Tile 的设置怎么样，小伙伴你已经学会了吗？

那我们有了这样的效果，之后我们可以进行绘图了，在绘图的窗口里有一些快捷键，我们这个正常的笔刷是按键盘上的 B，但是当你画了以后，如果你想快速的进入擦除的状态，我们可以直接按下键盘上的 Shift，按住 Shift 去点选就是删除，也就是我们的这个橡皮擦的功能，所以不用来回点那么麻烦，好的那这个 Background Details 的方法，我们已经学会了，接下来我们要来看看另外一个另外一个就是我们的 Shadows，我们 Shadows 同样需要设置成这样的效果，那么小伙伴们可以自己动手设置一下，我也快速设置一下，然后我会停留在这个位置，让大家看到我的条件，所以你也好好仔细想想这个 Shadows 这个部分的条件应该怎样设置。我们在 Shadows 这个文件夹里创建 Shadows 的 Rule Tile。

好的我现在暂时设好了这个大的方块里面的 Shadow 的 Rule Tile，但是小伙伴们请留意这个小的这个方块，本来它是在你的 Palette 的里面的上面这一行显示，我把它挪过来的原因是什么呢？它们四个就是我在刚才设置这个部分的时候，这四个部分就是相当于这里面的内角，所以我们要根据内角设置的原则，将它们四个也设置到这个 Rule 里面来。

好的我设置好了四个内角的部分了，小伙伴们如果没弄清的话可以看看我屏幕上现在设置的这些规则，然后最后我们来设置中间的是个方块的这个图案，它只需要上下左右四个方向就可以了，所以这是我们 Shadows 所设置好的，这个 Rule Tile。

设置好了以后别忘记，我们要将这个我们设置好的这个 Rule 将它拖拽到我们的这个 Palette 里面来。

## 平台（Platforms）的随机 Rule Tile 设置

然后接下来我们去到 Platform 里面。在 Platform 里面，我们要将 Platform，我们绘制在我们的 Platform 的 Tilemap 里面。千万记住要选好你要绘制的 Tilemap 的位置，然后我们同样是用笔刷工具来绘画，它可是如果我们这么画的话就很麻烦，要去调整里面每一个图案，但是在这里，它又不像我们刚才设置的背景一样是有固定的规则，这时我们要介绍另外一种方法就是随机图案。

我们先将这里面的内容擦掉，我希望有一个随机的这个图案，然后不用我想我，只要摁可以了，这时我们却去到 Platforms 这个文件夹里，我们按右键同样创建一个 Rule Tile 一个有规则的瓦片图案，我们给它选择叫 Random 随机的瓦片，在这时我们选择一个默认的图案，然后我们添加的规则这时请留意，刚才我们设置了一些规则，然后添加了很多的瓦片信息，在这里我只需要用这一个图标，然后让它随机输出，所以我们去到 Output 这个下拉菜单里，我们可以选择 Random 就是随机的意思，这个时候它问你了，你要在几个形状里进行随机，所以请留意我们这里有四个图案，所以我将它这里改成 4 回车，所以我就有了四个图案了，现在已经默认添加好了其中的一个图案就是这个 0，所以我们继续点击这个查找的按钮，然后将其他三个图案放到里面来，或者你用拖拽的方法都可以。

好的现在我们就设置好了，然后我们将它拖拽回来，接着我们选择它在我们的 Platform 的这个 Tilemap 里面进行绘制，我选择它以后这个时候请留意我的笔刷绘制的过程，看到了吗？它现在就是随机生成的了，怎么样是不是非常的方便呢？

## 场景绘制与注意事项

好的现在小伙伴们，你就可以来绘制我们的这个游戏的场景了，请留意建议大家所有的地板和楼层，我们使用两层来绘制，也就是说要绘制两行。小伙伴们可以尽量多使用这个方块的矩形来进行矩形绘制，为什么要这么做呢？来绘制一下，在绘制好了矩形的 Platforms 之后，请大家回到 Shadows 这个 Tilemap 选择 Shadows Tile Palette，然后同样我们要在我们的这个 Platform 之上来绘制这个阴影，为什么会要绘制这个阴影的效果呢？稍后，但我们添加灯光的时候，你就会知道了。

这小伙伴们可以发挥你的创意，将我们的场景设置的非常漂亮一些，尽可能的大一些。可以在设置场景的时候不要忘记你至少要留一个出口，是什么样的出口呢？我来给大家简单绘制一下，好的这就是绘制出口这样的话，我们游戏角色走到这个位置的时候，我们就视为这一关通关了，我们稍后会在这里设置一道门，但通过这道门，我们就会去到下一个场景，所以小伙伴们可以发挥你的创意，在你的地图上进行绘画，别忘了添加这些的 Details，让你的整个游戏场景变得更漂亮一些。

# 总结

**1. Tilemap 和 Sorting Layer 的设置：**

* **创建多个 Tilemap：**

  * 学习如何根据场景需求创建不同的 Tilemap，例如 Background、Background Details、Platforms 和 Shadows。
* **Sorting Layer 的重要性：**

  * 理解 Sorting Layer 的作用，即控制游戏对象在屏幕上的叠放顺序。
  * 学会如何添加和设置 Sorting Layer，确保游戏元素的正确显示。
  * 理解排序的规则，越底部的排序，越在镜头前显示。
* **Tilemap 层的设置：**

  * 设置每个tilemap层所属于的sorting layer。
  * 理解在同一个sorting layer中，层级数字越大的在前面显示。

**2. Tilemap 2D Extras 的应用：**

* **Rule Tile 的使用：**

  * 学习如何创建和使用 Rule Tile，实现瓦片的自动填充和规则化显示。
  * 理解 Rule Tile 的规则设置，包括九宫格规则和输出选项。
  * 掌握Rule Tile规则的优先级，顶部规则优先执行。
* **随机 Rule Tile 的应用：**

  * 掌握如何使用随机 Rule Tile，实现瓦片的随机生成，提高场景的丰富度。
* **场景绘制技巧：**

  * 掌握使用矩形工具快速绘制场景的方法。
  * 理解叠层绘制的重要性，例如使用两层绘制地板和楼层。
  * 学习如何绘制阴影效果，增强场景的立体感。
  * 学习如何添加出口，为游戏关卡设计做准备。
* **快捷键的使用：**

  * 使用B键切换到笔刷工具。
  * 使用Shift键配合笔刷工具，切换到擦除功能。

**3. 场景绘制注意事项：**

* **Tilemap 的选择：**

  * 确保在绘制时选择正确的 Tilemap，避免绘制错误。
* **比例的把握：**

  * 通过添加角色模型，了解场景的比例，确保场景的合理性。
* **出口的设置：**

  * 在场景中预留出口，为后续的关卡切换做准备。
* **细节的添加：**

  * 通过添加细节，使场景更加美观和生动。